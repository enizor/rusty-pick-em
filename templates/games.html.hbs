<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Matchs</title>

    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css" integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w"
        crossorigin="anonymous">
    <!--[if lte IE 8]>
                    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/grids-responsive-old-ie-min.css">
                <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/grids-responsive-min.css">
    <!--<![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        .game {
            border: 3px solid;
            border-radius: 5px;
            margin-top: 10px;
        }

        .has_bet {
            border-color: rgb(28, 184, 65)
        }

        .no_bet {
            border-color: rgb(223, 117, 20)
        }

        .started {
            border-color: grey
        }

        .button-success,
        .button-error,
        .button-warning,
        .button-secondary {
            color: white;
            border-radius: 4px;
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
        }

        .button-success {
            background: rgb(28, 184, 65);
            /* this is a green */
        }

        .button-error {
            background: rgb(202, 60, 60);
            /* this is a maroon */
        }

        .button-warning {
            background: rgb(223, 117, 20);
            /* this is an orange */
        }

        .button-secondary {
            background: rgb(66, 184, 221);
            /* this is a light blue */
        }

        .flag {
            {{!-- border: 1px solid #a5a5a5; --}}
            margin-top: 5px;
            margin-bottom: 5px;
            margin-left: auto;
            margin-right: auto;
            width: 45px;
            height: 33px;
        }
    </style>
</head>

<body style="text-align:center;">
    <header>
        Vous êtes connecté en tant que {{username}}.
        <a href="/logout">Logout</a>{{#if flash}}
        <br> {{flash}} {{/if}}
    </header>
    <h1>Matchs</h1>
    <div style="max-width:768px;margin:auto">
        <div class="pure-g">
            {{#if previous_day}}
            <a id="button-previous" href="/games?date={{previous_day}}" class="pure-button pure-u-3-5 pure-u-sm-1-3" style="margin: auto">
                Jour précédent
            </a>
            {{/if}}
            <form class="pure-u-1 pure-u-sm-1-3 pure-form pure-form-stacked" action="/games" method="GET">
                <label>Date:
                    <input style="margin: auto" type="date" name="date">
                </label>
                <button type="submit" class="pure-button" style="margin-bottom:10px">Go!</button>
            </form>
            {{#if next_day}}
            <a id="button-next" href="/games?date={{next_day}}" class="pure-button pure-u-3-5 pure-u-sm-1-3" style="margin: auto">
                Jour suivant
            </a>
            {{/if}}
        </div>
        <br> {{#each games}}
        <div class="pure-g game{{#if this.started}} started {{else}} {{#if this.bet.id}} has_bet {{else}} no_bet {{/if}}{{/if}}">
            <div id="game_time-{{this.id}}" class="pure-u-1" style="border-bottom: 1px solid #e5e5e5;margin-bottom: .3em">
            </div>
            <svg class="flag"><use xlink:href="{{this.team1.flag}}"></use></svg>

            {{!-- <img src="{{this.team1.flag}}" alt="{{this.team1.name}}" class="pure-u-5-12 pure-u-sm-1-5 flag"> --}}
            <div class="pure-u-5-12 pure-u-sm-1-5">
                <p>{{this.team1.name}}</p>
                {{#if this.finished}}
                <p>{{this.score1}}</p>
                {{/if}}{{#if this.bet.id}}
                <p>{{this.bet.score1}}</p>
                {{/if}}
            </div>
            <div class="pure-u-1 pure-u-sm-1-8">
                <a href="/game/{{this.id}}" class="pure-button button-{{#if this.bet.id}}success{{else}}warning{{/if}}" style="margin-top: auto;margin-bottom: auto;">

                    {{#if this.started}} Détails {{else}} Parier ! {{/if}}
                </a>
                {{#if this.finished}}
                <p style="text-align: center">Résultat</p>
                {{/if}}
                <p style="text-align: center">Pari</p>
            </div>
            <div class="pure-u-5-12 pure-u-sm-1-5">
                <p>{{this.team2.name}}</p>
                {{#if this.finished}}
                <p>{{this.score2}}</p>
                {{/if}}{{#if this.bet.id}}
                <p>{{this.bet.score2}}</p>
                {{/if}}
            </div>
            <svg class="flag"><use xlink:href="{{this.team2.flag}}"></use></svg>
            {{!-- <img src="{{this.team2.flag}}" alt="{{this.team2.name}}" class="pure-u-5-12 pure-u-sm-1-5 flag" /> --}}
            <script>
                var jours = ["Dimanche ", "Lundi ", "Mardi ", "Mercredi ", "Jeudi ", "Vendredi ", "Samedi "];
                var d = new Date;
                d.setTime({{ this.time }});
                var n = jours[d.getDay()] + d.getDate() + ' à ' + d.getHours() + ':00'
                document.getElementById("game_time-{{ this.id }}").innerHTML = n;
            </script>
        </div>
        {{/each}}
    </div>

</body>

</html>
